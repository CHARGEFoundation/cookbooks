defaults: &defaults
  headers:
    access_control:
      allowed_origins:
        - "http://<%= %x(ifconfig en1).slice(/(?<=inet\s)\d{2,3}(?:\.\d{1,3}){3}/) %>:<%= ENV['PORT'] || 4567 %>"
        - "http://127.0.0.1:<%= ENV['PORT'] || 4567 %>"
        - 'http://growthrepublic.com'
        - 'http://untitledkingdom.co'
      allowed_methods:
        - POST
        - OPTIONS
      allowed_headers:
        - X-App-Token
        - Content-Type
        - Accept
        - Origin
        - X-Requested-With

  api:
    app_token:
      growth_republic: <%= @application['app_token']['growth_republic'] %>
      untitled_kingdom: <%= @application['app_token']['untitled_kingdom'] %>

    base_crm:
      growth_republic:
        api_token: <%= @application['base_crm']['growth_republic'] %>

      untitled_kingdom:
        api_token: <%= @application['base_crm']['untitled_kingdom'] %>

development:
  <<: *defaults

production:
  <<: *defaults

test:
  api:
    app_token:
      account_1: 'internal-token-1'
      account_2: 'internal-token-2'

    base_crm:
      account_1:
        api_token: 'external-api-token-1'
      account_2:
        api_token: 'external-api-token-2'